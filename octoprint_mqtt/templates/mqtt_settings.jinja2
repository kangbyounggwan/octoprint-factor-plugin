<div id="settings_plugin_factor_mqtt" class="section">
  <div class="row">
    <div class="col-lg-6">
      <h4>MQTT 브로커 설정</h4>

      <div class="form-group">
        <label for="mqtt_broker_host">브로커 호스트</label>
        <input id="mqtt_broker_host" class="form-control"
               data-bind="value: settings.plugins.factor_mqtt.broker_host" placeholder="localhost">
      </div>

      <div class="form-group">
        <label for="mqtt_broker_port">브로커 포트</label>
        <input id="mqtt_broker_port" type="number" class="form-control" min="1" max="65535"
               data-bind="value: settings.plugins.factor_mqtt.broker_port" placeholder="1883">
      </div>

      <div class="form-group">
        <label for="mqtt_broker_username">사용자명</label>
        <input id="mqtt_broker_username" class="form-control"
               data-bind="value: settings.plugins.factor_mqtt.broker_username">
      </div>

      <div class="form-group">
        <label for="mqtt_broker_password">비밀번호</label>
        <input id="mqtt_broker_password" type="password" class="form-control"
               data-bind="value: settings.plugins.factor_mqtt.broker_password">
      </div>

      <div class="form-group">
        <label for="mqtt_topic_prefix">토픽 접두사</label>
        <input id="mqtt_topic_prefix" class="form-control"
               data-bind="value: settings.plugins.factor_mqtt.broker_topic_prefix" placeholder="octoprint">
      </div>
    </div>

    <div class="col-lg-6">
      <h4>발행 설정</h4>

      <div class="form-group">
        <label for="mqtt_qos_level">QoS 레벨</label>
        <select id="mqtt_qos_level" class="form-control"
                data-bind="value: settings.plugins.factor_mqtt.qos_level">
          <option value="0">0 - 최대 한 번</option>
          <option value="1">1 - 최소 한 번</option>
          <option value="2">2 - 정확히 한 번</option>
        </select>
      </div>

      <div class="checkbox">
        <label>
          <input type="checkbox"
                 data-bind="checked: settings.plugins.factor_mqtt.retain_messages">
          메시지 유지 (Retain)
        </label>
      </div>

      <h5>발행할 이벤트</h5>

      <div class="checkbox"><label>
        <input type="checkbox" data-bind="checked: settings.plugins.factor_mqtt.publish_status">
        프린터 상태 변경
      </label></div>

      <div class="checkbox"><label>
        <input type="checkbox" data-bind="checked: settings.plugins.factor_mqtt.publish_progress">
        인쇄 진행률
      </label></div>

      <div class="checkbox"><label>
        <input type="checkbox" data-bind="checked: settings.plugins.factor_mqtt.publish_temperature">
        온도 정보
      </label></div>

      <div class="checkbox"><label>
        <input type="checkbox" data-bind="checked: settings.plugins.factor_mqtt.publish_gcode">
        G-code 명령
      </label></div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <h4>연결 상태</h4>
      <div id="mqtt_connection_status" class="alert alert-info">
        <span class="glyphicon glyphicon-info-sign"></span>
        <span data-bind="text: connectionStatus">MQTT 연결 상태를 확인하는 중...</span>
      </div>

      <button type="button" class="btn btn-primary" id="mqtt_test_connection"
              data-bind="click: testConnection">
        <span class="glyphicon glyphicon-refresh"></span>
        연결 테스트
      </button>
    </div>
  </div>
</div>