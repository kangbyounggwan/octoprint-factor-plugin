<!-- FACTOR Plugin Setup - Simple QR Code & Web Setup -->
<div id="settings_plugin_factor_mqtt" class="factor-mqtt-setup">
  <!-- Language Selector -->
  <div class="language-selector">
    <div class="btn-group" id="fm-lang-selector">
      <button type="button" class="btn btn-mini" data-lang="en" title="English">
        ðŸ‡ºðŸ‡¸ EN
      </button>
      <button type="button" class="btn btn-mini" data-lang="ko" title="í•œêµ­ì–´">
        ðŸ‡°ðŸ‡· KO
      </button>
    </div>
  </div>

  <!-- Main Setup Container -->
  <div class="setup-container">
    <!-- Header -->
    <div class="setup-header">
      <h2 data-i18n="setup.title">FACTOR Device Setup</h2>
      <p class="text-muted" data-i18n="setup.description">
        Scan the QR code or click the button below to complete device setup on the FACTOR web dashboard.
      </p>
    </div>

    <!-- QR Code Section -->
    <div class="qr-section">
      <div class="qr-container">
        <img id="fm-qr-code" src="" alt="QR Code" />
        <div id="fm-qr-loading" class="qr-loading">
          <i class="icon-spinner icon-spin"></i>
          <span data-i18n="setup.qr.loading">Loading QR Code...</span>
        </div>
      </div>

      <div class="setup-info">
        <div class="info-item">
          <label data-i18n="setup.instanceId">Device ID:</label>
          <code id="fm-instance-display">Loading...</code>
        </div>

        <div class="info-item">
          <label data-i18n="setup.setupUrl">Setup URL:</label>
          <div class="url-container">
            <input type="text" id="fm-setup-url" class="input-block-level" readonly />
            <button id="fm-copy-url" class="btn btn-small" title="Copy URL">
              <i class="icon-copy"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <a id="fm-open-setup" href="#" target="_blank" class="btn btn-primary btn-large">
        <i class="icon-external-link"></i>
        <span data-i18n="setup.button.openWeb">Open Setup Page</span>
      </a>

      <button id="fm-refresh-qr" class="btn btn-small">
        <i class="icon-refresh"></i>
        <span data-i18n="setup.button.refresh">Refresh QR Code</span>
      </button>
    </div>

    <!-- Status Section -->
    <div class="status-section">
      <h4 data-i18n="setup.status.title">Connection Status</h4>

      <div class="status-item">
        <span class="status-label" data-i18n="setup.status.registered">Device Registered:</span>
        <span id="fm-status-registered" class="status-value">
          <i class="icon-question-sign"></i> <span data-i18n="setup.status.checking">Checking...</span>
        </span>
      </div>

      <div class="status-item">
        <span class="status-label" data-i18n="setup.status.mqtt">MQTT Connection:</span>
        <span id="fm-status-mqtt" class="status-value">
          <i class="icon-question-sign"></i> <span data-i18n="setup.status.checking">Checking...</span>
        </span>
      </div>
    </div>

    <!-- Help Section -->
    <div class="help-section">
      <h4 data-i18n="setup.help.title">How to Setup</h4>
      <ol>
        <li data-i18n="setup.help.step1">Scan the QR code with your mobile device, or click "Open Setup Page" button</li>
        <li data-i18n="setup.help.step2">Login to your FACTOR account on the web page</li>
        <li data-i18n="setup.help.step3">Complete the device registration and configuration</li>
        <li data-i18n="setup.help.step4">Return here to verify the connection status</li>
      </ol>
    </div>
  </div>
</div>
