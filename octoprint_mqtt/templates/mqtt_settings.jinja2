<div class="tab-pane active" id="settings_mqtt">
    <div class="row">
        <div class="col-lg-6">
            <h4>MQTT 브로커 설정</h4>
            
            <div class="form-group">
                <label for="mqtt_broker_host">브로커 호스트</label>
                <input type="text" class="form-control" id="mqtt_broker_host" name="broker_host" 
                       value="{{ settings.broker_host }}" placeholder="localhost">
                <p class="help-block">MQTT 브로커의 호스트 주소 또는 IP</p>
            </div>
            
            <div class="form-group">
                <label for="mqtt_broker_port">브로커 포트</label>
                <input type="number" class="form-control" id="mqtt_broker_port" name="broker_port" 
                       value="{{ settings.broker_port }}" placeholder="1883" min="1" max="65535">
                <p class="help-block">MQTT 브로커의 포트 번호 (기본값: 1883)</p>
            </div>
            
            <div class="form-group">
                <label for="mqtt_broker_username">사용자명 (선택사항)</label>
                <input type="text" class="form-control" id="mqtt_broker_username" name="broker_username" 
                       value="{{ settings.broker_username }}" placeholder="사용자명">
                <p class="help-block">MQTT 브로커 인증을 위한 사용자명</p>
            </div>
            
            <div class="form-group">
                <label for="mqtt_broker_password">비밀번호 (선택사항)</label>
                <input type="password" class="form-control" id="mqtt_broker_password" name="broker_password" 
                       value="{{ settings.broker_password }}" placeholder="비밀번호">
                <p class="help-block">MQTT 브로커 인증을 위한 비밀번호</p>
            </div>
            
            <div class="form-group">
                <label for="mqtt_topic_prefix">토픽 접두사</label>
                <input type="text" class="form-control" id="mqtt_topic_prefix" name="broker_topic_prefix" 
                       value="{{ settings.broker_topic_prefix }}" placeholder="octoprint">
                <p class="help-block">모든 MQTT 토픽에 사용될 접두사</p>
            </div>
        </div>
        
        <div class="col-lg-6">
            <h4>발행 설정</h4>
            
            <div class="form-group">
                <label for="mqtt_qos_level">QoS 레벨</label>
                <select class="form-control" id="mqtt_qos_level" name="qos_level">
                    <option value="0" {% if settings.qos_level == 0 %}selected{% endif %}>0 - 최대 한 번</option>
                    <option value="1" {% if settings.qos_level == 1 %}selected{% endif %}>1 - 최소 한 번</option>
                    <option value="2" {% if settings.qos_level == 2 %}selected{% endif %}>2 - 정확히 한 번</option>
                </select>
                <p class="help-block">메시지 전달 품질 보장 레벨</p>
            </div>
            
            <div class="checkbox">
                <label>
                    <input type="checkbox" id="mqtt_retain_messages" name="retain_messages" 
                           {% if settings.retain_messages %}checked{% endif %}>
                    메시지 유지 (Retain)
                </label>
                <p class="help-block">브로커가 마지막 메시지를 유지하도록 설정</p>
            </div>
            
            <h5>발행할 이벤트</h5>
            
            <div class="checkbox">
                <label>
                    <input type="checkbox" id="mqtt_publish_status" name="publish_status" 
                           {% if settings.publish_status %}checked{% endif %}>
                    프린터 상태 변경
                </label>
            </div>
            
            <div class="checkbox">
                <label>
                    <input type="checkbox" id="mqtt_publish_progress" name="publish_progress" 
                           {% if settings.publish_progress %}checked{% endif %}>
                    인쇄 진행률
                </label>
            </div>
            
            <div class="checkbox">
                <label>
                    <input type="checkbox" id="mqtt_publish_temperature" name="publish_temperature" 
                           {% if settings.publish_temperature %}checked{% endif %}>
                    온도 정보
                </label>
            </div>
            
            <div class="checkbox">
                <label>
                    <input type="checkbox" id="mqtt_publish_gcode" name="publish_gcode" 
                           {% if settings.publish_gcode %}checked{% endif %}>
                    G-code 명령
                </label>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-lg-12">
            <h4>연결 상태</h4>
            <div id="mqtt_connection_status" class="alert alert-info">
                <span class="glyphicon glyphicon-info-sign"></span>
                MQTT 연결 상태를 확인하는 중...
            </div>
            
            <button type="button" class="btn btn-primary" id="mqtt_test_connection">
                <span class="glyphicon glyphicon-refresh"></span>
                연결 테스트
            </button>
        </div>
    </div>
</div>
